@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================================
   TYPOGRAPHY SYSTEM
   Primary: Inter (geometric sans-serif, variable weight)
   Accent: Playfair Display (serif, italic emphasis only)
   Mono: JetBrains Mono (code blocks)
   All fonts loaded via Next.js Google Fonts optimization
   ============================================================================ */

@layer base {
  :root {
    color-scheme: dark;

    /* =========================================================================
       FRANKX BRAND v2.0 — Accent Colors (Feb 2026)
       ========================================================================= */

    /* Brand Accents */
    --brand-purple: #AB47C7;     /* Intelligence, ACOS, primary brand */
    --brand-blue: #43BFE3;       /* Technology, Vibe OS, architecture */
    --brand-magenta: #E040FB;    /* GenCreator OS, multi-modal creation */
    --brand-emerald: #10B981;    /* Success, Labs, CTAs */
    --brand-obsidian: #1E0A3C;   /* Arcanea, cosmos, deep mystery */
    --brand-arcanea-glow: #7C3AED; /* Arcanea accent glow */
    --brand-gold: #F59E0B;       /* Premium, exclusive tier */
    --brand-rose: #F43F5E;       /* Errors, destructive actions */
    --brand-starlight: #38BDF8;  /* Starlight meta-intelligence */
    --brand-navy: #0F172A;       /* Brand primary dark */

    /* Legacy aliases */
    --brand-cyan: #43BFE3;
    --brand-amber: #F59E0B;

    /* =========================================================================
       SEMANTIC DESIGN TOKENS
       ========================================================================= */

    /* Backgrounds - Dark-first Foundation */
    --bg-void: #0a0a0b;
    --bg-space: #111113;
    --bg-elevated: #1a1a1f;
    --bg-subtle: #252530;
    --bg-muted: #3a3a4a;

    /* Text Hierarchy — Brand v2.0 WCAG compliant
       0.95 on #0a0a0b ≈ 18.5:1 (AAA)
       0.72 on #0a0a0b ≈ 11.2:1 (AAA)
       0.48 on #0a0a0b ≈ 7.5:1 (AAA)
       0.32 on #0a0a0b ≈ 5.0:1 (AA) */
    --text-primary: rgba(255, 255, 255, 0.95);
    --text-secondary: rgba(255, 255, 255, 0.72);
    --text-tertiary: rgba(255, 255, 255, 0.48);
    --text-muted: rgba(255, 255, 255, 0.32);
    --text-blog-body: rgba(255, 255, 255, 0.85);

    /* Border System — Hex for consistency */
    --border-subtle: #1f1f2f;
    --border-default: #2a2a3a;
    --border-strong: #3a3a4a;

    /* =========================================================================
       SHADCN/UI COMPATIBLE TOKENS
       ========================================================================= */
    --background: 222 83% 4%;
    --foreground: 210 40% 96%;
    --muted: 215 28% 17%;
    --muted-foreground: 215 20% 65%;
    --accent: 258 90% 66%;
    --accent-foreground: 217 91% 12%;
    --card: 222 83% 9%;
    --card-foreground: 210 40% 96%;
    --border: 215 28% 27%;
    --input: 215 28% 22%;
    --ring: 208 93% 58%;

    /* Primary accent mapped to brand emerald */
    --primary: var(--brand-emerald);
    --primary-foreground: var(--bg-void);

    /* Secondary accent mapped to brand cyan */
    --secondary: var(--brand-cyan);
    --secondary-foreground: var(--bg-void);
  }

  /* Critical mobile fix: prevent horizontal overflow at the root level */
  html {
    overflow-x: hidden;
    scroll-behavior: smooth;
  }

  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    overflow-x: hidden;
    position: relative;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Safe area support for mobile devices with notches */
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }

  /* Playfair Display italic for quotes & editorial emphasis */
  .font-serif-italic {
    font-family: var(--font-serif), 'Playfair Display', Georgia, serif;
    font-style: italic;
    font-weight: 400;
  }

  /* Poppins display font for headings ≥18px */
  .font-display {
    font-family: var(--font-poppins), 'Poppins', system-ui, sans-serif;
  }

  .gradient-text {
    background-image: linear-gradient(135deg, #AB47C7, #43BFE3);
    -webkit-background-clip: text;
    color: transparent;
  }

  .gradient-bg {
    background-image: linear-gradient(135deg, #0a0a0b, #111113, #0F172A);
  }

  /* Glassmorphism — Use Tailwind classes from lib/design/tokens.ts surface system
     Canonical: backdrop-blur-xl bg-white/5 border border-white/10
     See also: glassCardClasses in lib/design/gradients.ts */

  /* ==========================================================================
     ACCESSIBLE TEXT UTILITIES - Use instead of raw opacity values
     These map to CSS variables with WCAG-compliant contrast ratios
     ========================================================================== */
  .text-brand-primary { color: var(--text-primary); }
  .text-brand-secondary { color: var(--text-secondary); }
  .text-brand-tertiary { color: var(--text-tertiary); }
  .text-brand-muted { color: var(--text-muted); }
  .text-blog-body { color: var(--text-blog-body); }

  /* Background utilities using design tokens */
  .bg-void { background-color: var(--bg-void); }
  .bg-space { background-color: var(--bg-space); }
  .bg-elevated { background-color: var(--bg-elevated); }
  .bg-subtle { background-color: var(--bg-subtle); }

  /* Border utilities using design tokens */
  .border-brand-subtle { border-color: var(--border-subtle); }
  .border-brand-default { border-color: var(--border-default); }
  .border-brand-strong { border-color: var(--border-strong); }

  /* Premium hover lift — reusable card elevation on hover */
  .card-hover-lift {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .card-hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 40px rgb(0 0 0 / 0.25);
  }

  /* Premium card — glassmorphic surface for Watch page and similar dark UIs */
  .card-premium {
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 0 20px 60px rgb(8 15 33 / 0.45);
  }
}

/* Film-grain overlay — subtle noise texture for depth */
.grain-overlay::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  opacity: 0.03;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
}

/* Scrollbar-hidden utility for carousels */
@layer utilities {
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
}

.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

.skip-to-content {
  position: absolute;
  left: -9999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

.skip-to-content:focus {
  left: 1rem;
  top: 1rem;
  width: auto;
  height: auto;
  padding: 0.75rem 1.5rem;
  background: linear-gradient(135deg, #AB47C7, #43BFE3);
  color: #ffffff;
  border-radius: 0.5rem;
  box-shadow: 0 12px 40px rgba(14, 165, 233, 0.45);
  z-index: 9999;
  text-decoration: none;
}

/* ============================================================================
   ARTICLE TYPOGRAPHY — Blog & Guide reading experience
   Custom list markers, blockquote treatment, prose rhythm
   ============================================================================ */

/* Unordered list: emerald dot markers */
.article-list li::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0.7em;
  width: 5px;
  height: 5px;
  border-radius: 9999px;
  background-color: rgb(52 211 153 / 0.6); /* emerald-400/60 */
}

/* Ordered list: emerald numbered markers */
.article-ol {
  counter-reset: article-counter;
}

.article-ol li {
  counter-increment: article-counter;
}

.article-ol li::before {
  content: counter(article-counter) '.';
  position: absolute;
  left: 0;
  top: 0;
  font-size: 0.85em;
  font-weight: 600;
  font-variant-numeric: tabular-nums;
  color: rgb(52 211 153 / 0.7); /* emerald-400/70 */
}

/* Blockquote serif treatment */
.article-blockquote {
  font-family: var(--font-serif), 'Playfair Display', Georgia, serif;
  font-style: italic;
}

/* Code block line-number gutter (future enhancement hook) */
.article-code-block {
  tab-size: 2;
  -moz-tab-size: 2;
}

/* Smooth anchor scroll for heading links */
.article-heading-anchor {
  scroll-margin-top: 6rem;
}

/* Accessibility: Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
