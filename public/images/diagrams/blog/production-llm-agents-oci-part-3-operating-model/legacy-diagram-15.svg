<svg xmlns="http://www.w3.org/2000/svg" aria-label="Cost Control Mechanisms" viewBox="0 0 724 1105"><defs><linearGradient id="a" x1="0" x2="1" y1="0" y2="1"><stop offset="0%" stop-color="#050a14"/><stop offset="100%" stop-color="#0b1220"/></linearGradient><linearGradient id="d" x1="0" x2="1" y1="0" y2="0"><stop offset="0%" stop-color="#0ea5e9" stop-opacity="0"/><stop offset="50%" stop-color="#22d3ee" stop-opacity=".85"/><stop offset="100%" stop-color="#0ea5e9" stop-opacity="0"/></linearGradient><pattern id="c" width="24" height="24" patternUnits="userSpaceOnUse"><path fill="none" stroke="#334155" stroke-opacity=".22" d="M24 0H0v24"/></pattern><filter id="b" width="140%" height="140%" x="-20%" y="-20%"><feDropShadow dx="0" dy="8" flood-color="#020617" flood-opacity=".5" stdDeviation="14"/></filter></defs><rect width="712" height="1093" x="6" y="6" fill="url(#a)" stroke="#1f2937" stroke-width="2" filter="url(#b)" rx="20"/><rect width="712" height="1093" x="6" y="6" fill="url(#c)" rx="20"/><path fill="url(#d)" d="M34 56h656v2H34z"/><text x="34" y="40" fill="#e2e8f0" font-family="Inter, Segoe UI, system-ui, sans-serif" font-size="18" font-weight="700">Cost Control Mechanisms</text><g fill="#cbd5e1" font-family="JetBrains Mono, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, monospace" font-size="14"><text xml:space="preserve" x="32" y="84">┌─────────────────────────────────────────────────────────────────────────┐</text><text xml:space="preserve" x="32" y="105">│                    COST CONTROL HIERARCHY                                │</text><text xml:space="preserve" x="32" y="126">├─────────────────────────────────────────────────────────────────────────┤</text><text xml:space="preserve" x="32" y="147">│                                                                          │</text><text xml:space="preserve" x="32" y="168">│  LAYER 1: Per-Request Limits                                             │</text><text xml:space="preserve" x="32" y="189">│  ┌─────────────────────────────────────────────────────────────────┐    │</text><text xml:space="preserve" x="32" y="210">│  │  if request.estimated_cost &gt; $0.50:                             │    │</text><text xml:space="preserve" x="32" y="231">│  │      reject(&quot;Request exceeds per-request limit&quot;)                │    │</text><text xml:space="preserve" x="32" y="252">│  │  if request.token_count &gt; 100000:                               │    │</text><text xml:space="preserve" x="32" y="273">│  │      reject(&quot;Request exceeds token limit&quot;)                      │    │</text><text xml:space="preserve" x="32" y="294">│  └─────────────────────────────────────────────────────────────────┘    │</text><text xml:space="preserve" x="32" y="315">│                                    │                                     │</text><text xml:space="preserve" x="32" y="336">│                                    ▼                                     │</text><text xml:space="preserve" x="32" y="357">│  LAYER 2: Per-User Limits (Rate Limiting)                                │</text><text xml:space="preserve" x="32" y="378">│  ┌─────────────────────────────────────────────────────────────────┐    │</text><text xml:space="preserve" x="32" y="399">│  │  user_daily_cost = sum(requests_today)                          │    │</text><text xml:space="preserve" x="32" y="420">│  │  if user_daily_cost &gt; $10:                                      │    │</text><text xml:space="preserve" x="32" y="441">│  │      throttle(user_id, until=&quot;tomorrow&quot;)                        │    │</text><text xml:space="preserve" x="32" y="462">│  │      notify_user(&quot;Daily limit reached&quot;)                         │    │</text><text xml:space="preserve" x="32" y="483">│  └─────────────────────────────────────────────────────────────────┘    │</text><text xml:space="preserve" x="32" y="504">│                                    │                                     │</text><text xml:space="preserve" x="32" y="525">│                                    ▼                                     │</text><text xml:space="preserve" x="32" y="546">│  LAYER 3: Per-Tenant Limits (Budget Enforcement)                         │</text><text xml:space="preserve" x="32" y="567">│  ┌─────────────────────────────────────────────────────────────────┐    │</text><text xml:space="preserve" x="32" y="588">│  │  tenant_monthly_cost = sum(requests_this_month)                 │    │</text><text xml:space="preserve" x="32" y="609">│  │  if tenant_monthly_cost &gt; tenant.budget * 0.8:                  │    │</text><text xml:space="preserve" x="32" y="630">│  │      alert(&quot;80% of budget consumed&quot;)                            │    │</text><text xml:space="preserve" x="32" y="651">│  │  if tenant_monthly_cost &gt; tenant.budget:                        │    │</text><text xml:space="preserve" x="32" y="672">│  │      downgrade_model(tenant_id)  # Use cheaper model            │    │</text><text xml:space="preserve" x="32" y="693">│  │      # OR block_requests(tenant_id)                             │    │</text><text xml:space="preserve" x="32" y="714">│  └─────────────────────────────────────────────────────────────────┘    │</text><text xml:space="preserve" x="32" y="735">│                                    │                                     │</text><text xml:space="preserve" x="32" y="756">│                                    ▼                                     │</text><text xml:space="preserve" x="32" y="777">│  LAYER 4: Organization Limits (Hard Stops)                               │</text><text xml:space="preserve" x="32" y="798">│  ┌─────────────────────────────────────────────────────────────────┐    │</text><text xml:space="preserve" x="32" y="819">│  │  if org_monthly_cost &gt; org.hard_limit:                          │    │</text><text xml:space="preserve" x="32" y="840">│  │      emergency_shutdown()                                       │    │</text><text xml:space="preserve" x="32" y="861">│  │      page_oncall(&quot;Cost limit exceeded&quot;)                         │    │</text><text xml:space="preserve" x="32" y="882">│  └─────────────────────────────────────────────────────────────────┘    │</text><text xml:space="preserve" x="32" y="903">│                                                                          │</text><text xml:space="preserve" x="32" y="924">│  OCI Implementation:                                                     │</text><text xml:space="preserve" x="32" y="945">│  • OCI Budgets for alerts and tracking                                  │</text><text xml:space="preserve" x="32" y="966">│  • Functions for enforcement logic                                       │</text><text xml:space="preserve" x="32" y="987">│  • API Gateway for rate limiting                                         │</text><text xml:space="preserve" x="32" y="1008">│  • Events + Notifications for alerting                                   │</text><text xml:space="preserve" x="32" y="1029">│                                                                          │</text><text xml:space="preserve" x="32" y="1050">└─────────────────────────────────────────────────────────────────────────┘</text></g></svg>